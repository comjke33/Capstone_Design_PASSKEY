### Xbee와 Zigbee의 차이점 ###
**장경은**

- Zigbee는 글로벌 주파수에서 작동
- Xbee는 Digi International의 브랜드 이름이며 프로토콜 그룹을 공유함
- Zigbee는 표준으로 지정된 통신 방식으로, 블루투스처럼 다른 회사의 Zigbee 장치와 통신할 수 있다.
- Xbee가 Zigbee와 같거나 그 반대의 개념이 아니라, Xbee가 Zigbee 센서를품을 수 있거나 그렇지 않은 것의 개념이다.

### Zigbee는… ###
**장경은**

- 역할을 3가지로 나누어서 서로 다른 기능을 수행
    - 코디네이터
    - 라우터
    - 앤드 디바이스

- Zigbee는 Wifi와 동시로 작동될 경우, 서로 보완 관계에 놓일 수 있다.
- 둘은 주파수 대역을 공유하지만, 각기 다른 용도로 사용됨.
- 낮은 데이터 전송률을 가진 Zigbee를 보완하기 위해 높은 데이터 전송 속도를 가진 Wifi를 함께 사용할 수 있다.
- 지그비는 전력 소모가 낮으면서 장치 연결 가능 수가 매우 많아 위의 개발에 적합한 통신기술이다.
- [[아두이노] Zigbee 통신하기](https://macgyvering.tistory.com/41)

- GPT에 따르면 질의 응답을 시도하는데 필요한 데이터 전송 용량 한계는 거의 없다고 봐도 무방하다.

### 논문 확인 ###
**장경은**

- [www.kais99.org](https://www.kais99.org/jkais/journal/Vol24No09/vol24no09p05.pdf)

- 위의 논문을 확인해보면, 지그비를 대형 건물에 부분 부분 설치했을 때 나타나는 한계를 분석하였다.
- 멀어질수록 위치 전송에 있어서 오차가 점점 증가하는 것을 확인할 수 있었다.
- 또한, 다른 블로그에서 9미터보다 멀어질 경우 데이터 전송 오차가 커지기 시작했기 때문에 하나의 지그비로 한 건물의 모든 수업을 파악할 수 없다고 판단.
- 따라서, 강의실별로 지그비 부품을 설치하고 데이터 전송을 설치할 수 있도록 해야한다.
- 너무 큰 대형 강의실의 경우는 1개 아닌 여러 개의 지그비를 설치하여 정보를 통신할 수 있도록 해야한다.

### 구현 가능한 시나리오 ###
**장경은**

> 지그비를 사용해 학생들의 출결을 자동으로 처리하는 시스템을 구축하려면 다음과 같은 시나리오가 가능할 수 있습니다:
> 
> 1. 지그비 모듈을 학생 또는 강의실에 배치: 지그비 모듈이 내장된 장치(예: 지그비가 장착된 배지, 스마트폰에 지그비 동글 장착)를 학생이 가지고 있고, 강의실에 설치된 지그비 허브와 통신할 수 있습니다. 학생이 강의실 내에 있으면 지그비 신호를 감지하고, 출석 처리를 자동으로 하도록 웹사이트에서 처리하는 방법입니다.
> 2. 웹사이트와의 통신: 학생들이 강의실에서 웹사이트에 접속할 때, 해당 지그비 장치와 통신하여 출결 처리가 가능한지 여부를 확인하는 방식입니다. 예를 들어, 지그비 허브가 특정 근거리에서 학생의 존재를 감지한 후, 이를 웹 서버에 전달하여 웹사이트에서 출석 처리를 허용하게 할 수 있습니다.
> 3. 지그비 네트워크와 서버 통합: 지그비 허브가 각 학생의 장치와 통신한 후, 해당 데이터를 서버에 전송하여 웹사이트 상에서 처리할 수 있습니다. 이때, 지그비 허브와 웹 서버 간의 통신은 Wi-Fi나 Ethernet과 같은 다른 네트워크 기술을 통해 연결되어야 합니다.

- GPT의 응답에 따르면 2번이나 3번 통신이 우리가 의미하는 통신이다.

### 기술적 고려사항 ###
**장경은**

> - 네트워크 통합: 지그비는 자체적으로 인터넷에 연결되지 않기 때문에, 지그비 통신으로 받은 출결 데이터를 웹 서버에 전송하려면 추가적인 게이트웨이 장치가 필요합니다. 즉, 지그비 통신을 처리할 수 있는 허브(게이트웨이)를 설치하고, 이 허브가 데이터를 서버로 전송할 수 있어야 합니다.
> - 학생 식별 및 인증: 지그비 모듈이 학생별로 고유하게 식별될 수 있도록 해야 하며, 이를 웹사이트에서 인증하여 출결을 처리할 수 있도록 시스템을 설계해야 합니다.
> - 보안: 웹사이트와 지그비 간의 통신이 이루어질 때, 무단 접근을 방지하고 데이터를 안전하게 처리할 수 있는 보안 메커니즘을 구현해야 합니다.

- 지그비 자체는 인터넷에 연결되지 않다는 것이 우리가 놓친 점이다.
- 지그비 ↔ 학생들 장치 (근거리에 있다는 것이 확인됨)
    - 그러나 이것은 불가능하다. 아래에 나온다.
- 학생들 장치 ↔ http 웹 사이트
    - 접속을 통해 출결할 의지가 있음을 보임
    - 또한, 다양한 교수님의 강의 도구를 따라갈 수 있음

### 블루투스의 한계 ###
**장경은**

> - 블루투스, 특히 BLE(Bluetooth Low Energy)는 저전력 근거리 통신에 적합하지만, 대량의 장치와 동시에 통신하는 데에는 한계가 있을 수 있습니다. BLE는 다수의 디바이스를 스캔하고 연결할 수 있지만, 동시 접속 장치 수가 제한되며, 특히 양방향 통신을 요구하는 경우 대기 시간이나 통신 속도에서 성능 저하가 발생할 수 있습니다. 블루투스 네트워크가 많은 학생들의 스마트폰과 양방향 통신을 동시에 처리하려면 복잡한 연결 관리가 필요하며, 특히 출석 처리를 위한 대량 트래픽이 발생할 수 있습니다.
> 
> 반면, 지그비는 메쉬 네트워크 구조를 활용하여 여러 장치가 동시에 서로 통신할 수 있으므로, 많은 장치가 동시에 데이터를 교환하는 데 있어 블루투스보다 더 효율적일 수 있습니다. 따라서 다수의 학생과 통신해야 하는 환경에서는 블루투스보다 지그비가 더 적합할 가능성이 있습니다.
> 

- 이미 알았듯이, 블루투스는 동시 접속자가 많은 상태에서 양방향 통신을 수행하기 어렵다.
- 따라서 해당 측면에서는 블루투스보다 지그비 통신이 뛰어나다고 볼 수 있다.

### 스마트폰과 지그비 통신 ###
**장경은**

> - 스마트폰은 기본적으로 지그비 통신을 직접 지원하지 않습니다. 지그비는 산업용이나 IoT 기기에서 많이 사용하는 통신 프로토콜로, 스마트폰과의 직접적인 통신은 불가능합니다. 그러나 스마트폰에 지그비 동글(USB 또는 Bluetooth를 통해 연결되는 장치)을 부착하면, 스마트폰이 지그비 네트워크에 연결될 수 있습니다.
> - 또 다른 방법은 지그비 허브가 스마트폰과 Wi-Fi나 블루투스와 같은 다른 통신 기술을 중계하는 방식입니다. 이 경우, 지그비 네트워크는 강의실 내의 장치 간 통신을 관리하고, 학생들의 스마트폰은 Wi-Fi나 블루투스를 통해 허브에 연결되어 출결 처리를 위한 신호를 주고받을 수 있습니다. 스마트폰이 반드시 지그비 모듈을 탑재할 필요는 없으며, 중간에 허브 역할을 하는 장치가 있다면 통합적인 시스템을 구성할 수 있습니다.

- 지그비 통신은 스마트폰에서 기본적으로 지원하지 않는다.
- 만약 우리가 지그비 통신을 사용하기 위해서는 블루투스를 통해서 출결 대기 명단에 올리고 시간을 두고 순차적으로 수행하는 방식을 기대할 수 있다.
- 따라서 지그비 통신 ↔ 블루투스 ↔ 학생들의 장치

### 근거리에서 학생 존재 감지 방안 ###
**장경은**

> - 지그비 통신 범위를 이용한 감지: 지그비 네트워크는 근거리 통신을 기반으로 하기 때문에, 특정 강의실 내에서 지그비 허브와 학생의 스마트폰이 통신할 수 있는 범위에 있을 때, 이를 통해 학생의 물리적 존재를 감지할 수 있습니다. 이를 위해서는 지그비 허브가 스마트폰(또는 학생이 가진 지그비 모듈)과의 연결을 통해 신호 세기를 확인하여, 학생이 특정 범위 내에 있는지 여부를 파악하는 방식입니다.
> - RSSI(Received Signal Strength Indicator)를 사용한 근접 측정: 지그비 허브는 학생의 지그비 장치(또는 동글)가 내보내는 신호의 강도를 측정할 수 있습니다. 이때, RSSI 값을 기반으로 학생이 허브에 얼마나 가까이 있는지 추정할 수 있습니다. 이를 이용해 출석 처리를 위해 정해진 범위 안에 있는 학생들만 감지하여 처리할 수 있습니다.
> - 지그비 메쉬 네트워크와 영역 구분: 강의실 내에서 여러 개의 지그비 허브를 설치하여 메쉬 네트워크를 구성하면, 학생들이 어느 위치에 있는지 더 세밀하게 감지할 수 있습니다. 예를 들어, 강의실 앞쪽, 중간, 뒷쪽에 각각 허브를 설치해 각 허브와의 통신 범위를 나누면 학생들이 허브와 가까운 위치에 있는지 확인할 수 있으며, 이를 통해 출석 여부를 처리할 수 있습니다.

- 어쩌면 학생들이 어느 위치에 있는 더 세밀하게 감지하여 학생들의 위치를 굳이 파악하지 않아도 된다.
- 그러나 이것은 학생들에게 지그비 모듈이 있을 때 경우이며, 현재 스마트폰은 지그비를 지원하지 않기 때문에 불가능하다.

### 지그비 통신을 사용하기 위해서는 블루투스를 통해서 출결 대기 명단에 올리고 시간을 두고 순차적으로 수행하는 방식이 가능한가? ###
**장경은**

> 1. 지그비 통신과 블루투스 간의 중계
> 
> - 지그비 허브는 강의실 내에서 지그비 네트워크를 관리하고, 블루투스를 통해 학생들의 스마트폰과 통신할 수 있는 중계 역할을 수행합니다.
> - 허브가 블루투스 인터페이스를 갖추고 있다면, 학생의 스마트폰이 허브와 블루투스로 연결되어 학생이 강의실 내에 있다는 신호를 받을 수 있습니다. 이때 지그비 네트워크와 블루투스 네트워크가 서로 다른 프로토콜을 사용하지만, 허브가 두 네트워크 간의 통신을 중재하여 출석 처리를 가능하게 할 수 있습니다.
> 
> 2. 순차적 출석 처리
> 
> - 블루투스의 동시 연결 장치 수 제한을 극복하기 위해, 출석 처리를 순차적으로 수행하는 방식을 고려할 수 있습니다. 허브가 학생들의 스마트폰을 감지하고 대기 명단에 올린 후, 순차적으로 블루투스를 통해 학생들에게 출석 신호를 전송합니다. 이를 통해 학생들은 출석 처리를 위한 확인 메시지를 받아보고 응답할 수 있습니다.
> - 이 과정에서 시간이 걸리겠지만, 순차적 처리를 통해 모든 학생들의 출석 여부를 확인할 수 있으며, 동시에 출석 처리가 몰리면서 발생할 수 있는 블루투스 연결 문제를 해결할 수 있습니다.
> 
> 3. 실행 흐름
> 
> 1. 지그비 허브가 강의실에 있는 학생들의 스마트폰을 블루투스 신호를 통해 스캔합니다.
> 2. 학생들의 스마트폰이 출석 대기 명단에 등록됩니다.
> 3. 지그비 허브가 대기 명단에 등록된 학생들의 스마트폰으로 순차적으로 출석 요청을 보냅니다.
> 4. 스마트폰에서 허브와의 통신을 통해 출석 여부를 확인하고, 이 정보를 지그비 허브가 받아 서버에 전달하여 출석 처리를 완료합니다.
> 
> 4. 기술적 요구사항
> 
> - 중계 장치(허브): 지그비와 블루투스 간 통신을 중계할 수 있는 허브가 필요합니다. 이 허브는 블루투스 연결을 관리하고 지그비 네트워크와 데이터를 주고받을 수 있어야 합니다.
> - 블루투스 장치 관리: 블루투스는 연결할 수 있는 장치 수가 제한적이므로, 학생들이 대기 상태에서 차례대로 출석 처리가 되도록 스케줄링 로직이 필요합니다.
> - 스마트폰 앱: 학생들의 스마트폰에는 허브와 블루투스 통신을 할 수 있는 앱이 필요합니다. 이 앱은 블루투스를 통해 출석 요청을 받아 확인하고, 출석을 완료하는 방식으로 동작해야 합니다.
> 
> 5. 추가 고려사항
> 
> - 보안: 지그비와 블루투스 간 통신 중 데이터가 안전하게 처리되도록 암호화 및 인증 메커니즘을 사용하여 보안을 강화해야 합니다.
> - 성능 최적화: 블루투스 대기 명단 관리 및 순차적 처리가 부드럽게 이루어지도록 최적화가 필요합니다. 강의실 규모나 학생 수에 따라 처리 속도를 조정할 수 있어야 합니다.

### 그렇다면, 학생들의 스마트폰에 애플리케이션이 설치되어있는 것이 아니라 웹사이트로 동작할 수 있나? ###


> 웹사이트와 블루투스 통신
> 
> - 최신 웹 표준인 Web Bluetooth API를 사용하면 웹사이트에서 블루투스 장치와 직접 통신할 수 있습니다. 이 API는 브라우저 내에서 블루투스 장치와의 통신을 가능하게 해줍니다. 이 방식은 크롬, **엣지** 등 일부 브라우저에서 지원되며, 주로 BLE 장치와의 통신에 사용됩니다.
> - **구현 흐름**:
>     1. 웹사이트가 블루투스를 지원하는 장치와의 연결을 요청합니다.
>     2. 학생들의 스마트폰이 웹사이트에 접속한 상태에서 블루투스를 활성화하면, 브라우저를 통해 웹사이트가 스마트폰과 통신할 수 있습니다.
>     3. 블루투스를 통해 스마트폰이 출석 신호를 받고, 이 정보를 서버로 전달하여 출석 처리를 완료합니다.
> 
> **장점**: 별도의 앱 없이 웹 브라우저만으로도 블루투스 장치와의 통신이 가능합니다.
> 
> **단점**: Web Bluetooth API는 모든 브라우저에서 지원되지 않으며, 주로 BLE 장치와의 통신만 가능합니다. 또한, 일부 보안 제한 사항으로 인해 웹사이트에서 직접 장치를 검색하는 데 제약이 있을 수 있습니다.
> 
- 웹사이트에서 블루투스 통신을 통해서 지그비 허브가 처리할 수 있음

> **지그비와 웹사이트 통신**
> 
> 
> **구현 흐름**:
> 
> 1. 지그비 허브가 블루투스를 통해 학생들의 스마트폰과 통신하고 출석 데이터를 수집합니다.
> 2. 허브가 출석 정보를 서버에 전송합니다.
> 3. 웹사이트는 서버에서 해당 데이터를 받아 학생의 출석 여부를 표시하거나 추가 처리를 합니다.

> **하이브리드 방식**
> 
> - **스마트폰 ↔ 블루투스 ↔ 지그비 허브 ↔ 웹사이트**의 중간에 서버를 두고, 지그비 허브와 웹사이트가 모두 서버를 통해 데이터를 주고받도록 설계할 수 있습니다.
> - 학생들이 스마트폰을 통해 출석을 확인할 때, 웹사이트는 실시간으로 서버와 통신하여 지그비 허브로부터 받은 데이터를 표시합니다. 이 경우, 웹사이트는 블루투스와 직접 통신할 필요 없이 **서버와의 통신만 처리**하면 되므로 복잡한 장치 관리 없이도 출석 처리를 할 수 있습니다.

> **지그비의 역할**
지그비 허브는 **지그비 네트워크와 외부 네트워크를 연결하는 핵심 장치**로, 다음과 같은 역할을 수행합니다:
> 
> - 지그비 네트워크 구성 및 장치 간 통신 관리.
> - 지그비 ↔ Wi-Fi, Ethernet, Bluetooth 간의 **프로토콜 변환 및 중계**.
> - 출석 데이터의 실시간 수집 및 서버로 전송.
> - 학생들의 스마트폰이나 지그비 동글과의 통신 중개 및 출석 확인.
> 
> 이 허브가 중간에서 통신을 처리하고, 데이터를 적절하게 변환하고 중계함으로써, 출석 시스템의 핵심 기능을 수행하게 됩니다.
>